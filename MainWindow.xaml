<Window x:Class="WindowsLiveCaptionsReader.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="Live Captions Reader" Height="350" Width="800"
    WindowStyle="None"
    AllowsTransparency="True"
    Background="Transparent"
    Topmost="{Binding IsTopmost}"
    ResizeMode="CanResizeWithGrip"
    MouseDown="Window_MouseDown"
    KeyDown="Window_KeyDown">
    <Window.Resources>
        <Style x:Key="ScrollViewerStyle" TargetType="ScrollViewer">
            <Setter Property="VerticalScrollBarVisibility" Value="Hidden" />
        </Style>

        <!-- Pulsing Animation Style for Indicator -->
        <Style x:Key="PulsingIndicator" TargetType="Ellipse">
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsListening}" Value="True">
                    <DataTrigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard RepeatBehavior="Forever">
                                <DoubleAnimation Storyboard.TargetProperty="Opacity" From="1.0"
                                    To="0.4" Duration="0:0:0.8" AutoReverse="True" />
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <!-- Modern Ghost/Icon Button Style -->
        <Style x:Key="CleanIconButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Foreground" Value="#88FFFFFF" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}"
                            CornerRadius="4" Padding="5">
                            <ContentPresenter HorizontalAlignment="Center"
                                VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#22FFFFFF" />
                                <Setter Property="Foreground" Value="White" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#11FFFFFF" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Border x:Name="MainBorder" CornerRadius="12" Background="#DD121212" BorderBrush="#22FFFFFF"
        BorderThickness="1">
        <Border.Effect>
            <DropShadowEffect BlurRadius="25" ShadowDepth="10" Opacity="0.6" Direction="270" />
        </Border.Effect>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" /> <!-- Minimal Header -->
                <RowDefinition Height="*" />    <!-- History -->
                <RowDefinition Height="Auto" /> <!-- Active Translation -->
            </Grid.RowDefinitions>

            <!-- 1. Redesigned Header with Mode Indicator -->
            <Grid Grid.Row="0" Margin="15,10,15,5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" /> <!-- Mode Indicator -->
                    <ColumnDefinition Width="Auto" /> <!-- Utilities -->
                </Grid.ColumnDefinitions>

                <!-- Prominent Mode Indicator -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <Border x:Name="ModeIndicatorBadge" Background="#4CAF50" CornerRadius="4"
                        Padding="8,4" Margin="0,0,10,0">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock x:Name="ModeIcon" Text="âš¡" FontSize="14" Foreground="White"
                                Margin="0,0,5,0" />
                            <TextBlock x:Name="ModeText" Text="MODO LIVE" FontSize="12"
                                FontWeight="Bold" Foreground="White" />
                        </StackPanel>
                    </Border>

                    <TextBlock x:Name="StatusText" Text="Escuchando..." Foreground="#AAAAAA"
                        FontSize="11"
                        VerticalAlignment="Center" FontWeight="SemiBold" />

                    <!-- Recording Timer (hidden by default) -->
                    <TextBlock x:Name="RecordingTimer" Text="00:00" Foreground="#FF5722"
                        FontSize="12"
                        FontWeight="Bold" Margin="10,0,0,0" VerticalAlignment="Center"
                        Visibility="Collapsed" />

                    <!-- Session Controls (Inside StackPanel for layout) -->
                    <Button x:Name="BtnSessions" Click="Sessions_Click"
                        Style="{StaticResource CleanIconButtonStyle}" Margin="15,0,0,0"
                        ToolTip="Sesiones Guardadas">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE81C;" FontFamily="Segoe MDL2 Assets" FontSize="14"
                                Margin="0,0,5,0" />
                            <TextBlock x:Name="CurrentSessionTitle" Text="Nueva SesiÃ³n"
                                FontSize="11"
                                Foreground="#CCC" />
                        </StackPanel>
                    </Button>
                </StackPanel>

                <!-- Utility Controls (Right side) -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">

                    <!-- Vocabulary Button -->
                    <Button Click="Vocabulary_Click" Style="{StaticResource CleanIconButtonStyle}"
                        Margin="0,0,5,0"
                        ToolTip="My Vocabulary">
                        <TextBlock Text="ðŸ“š" FontSize="16" />
                    </Button>

                    <!-- AI Assistant Button -->
                    <Button x:Name="BtnQuickAssistHeader" Click="Copilot_Click"
                        Style="{StaticResource CleanIconButtonStyle}" Margin="0,0,5,0"
                        ToolTip="Asistente de IA (Ctrl+Space)">
                        <TextBlock Text="ðŸ’¡" FontSize="16" />
                    </Button>

                    <!-- Settings Button -->
                    <Button x:Name="BtnSettings" Click="Settings_Click"
                        Style="{StaticResource CleanIconButtonStyle}" Margin="0,0,5,0"
                        ToolTip="ConfiguraciÃ³n">
                        <TextBlock Text="&#xE713;" FontFamily="Segoe MDL2 Assets" FontSize="14" />
                    </Button>

                    <!-- Clear History Button -->
                    <Button Click="ClearHistory_Click"
                        Style="{StaticResource CleanIconButtonStyle}" Margin="0,0,5,0"
                        ToolTip="Limpiar Historial">
                        <TextBlock Text="&#xE74D;" FontFamily="Segoe MDL2 Assets" FontSize="14" />
                    </Button>

                    <!-- Close Button -->
                    <Button Click="CloseApp_Click" Style="{StaticResource CleanIconButtonStyle}"
                        ToolTip="Cerrar AplicaciÃ³n">
                        <TextBlock Text="&#xE711;" FontFamily="Segoe MDL2 Assets" FontSize="12" />
                    </Button>
                </StackPanel>
            </Grid>

            <!-- Settings Popup Overlay (Inside Grid for custom look) -->
            <Border x:Name="SettingsPanel" Grid.Row="1" Grid.RowSpan="2" HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Margin="0,0,15,0" Background="#EE252525" CornerRadius="8" BorderBrush="#33FFFFFF"
                BorderThickness="1"
                Visibility="Collapsed" Padding="15" Panel.ZIndex="100" Width="220">
                <StackPanel>
                    <TextBlock Text="ConfiguraciÃ³n" Foreground="White" FontWeight="Bold"
                        Margin="0,0,0,10" />

                    <!-- Audio Settings Section -->
                    <TextBlock Text="Entrada de MicrÃ³fono" Foreground="Gray" FontSize="11"
                        Margin="0,5,0,2" />
                    <ComboBox x:Name="ComboMicrophones"
                        SelectionChanged="ComboMicrophones_SelectionChanged"
                        Height="25" Margin="0,0,0,10" />

                    <Button Content="Probar Sistema" Click="TestSystem_Click"
                        Background="#333" Foreground="White" BorderBrush="Gray" Height="25"
                        Margin="0,0,0,5" />

                    <!-- Validation Output -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Nivel Mic:" Foreground="Gray" FontSize="11"
                            VerticalAlignment="Center" Margin="0,0,5,0" />
                        <ProgressBar x:Name="MicLevelBar" Width="100" Height="4" Maximum="1"
                            Value="0" Background="#222" Foreground="#00FF00" BorderThickness="0" />
                    </StackPanel>
                    <TextBlock x:Name="TestResultText" Text="" Foreground="#FFAAAA" FontSize="11"
                        Margin="0,0,0,10" TextWrapping="Wrap" />

                    <Separator Background="#33FFFFFF" Margin="0,0,0,10" />

                    <DockPanel LastChildFill="False" Margin="0,0,0,5">
                        <TextBlock Text="Opacidad" Foreground="#CCCCCC" VerticalAlignment="Center" />
                    </DockPanel>
                    <Slider Minimum="0.2" Maximum="1.0" Value="0.8"
                        ValueChanged="Slider_ValueChanged" Margin="0,0,0,15" />

                    <CheckBox Content="Siempre Visible" Foreground="#CCCCCC" IsChecked="True"
                        Checked="Topmost_Checked" Unchecked="Topmost_Unchecked" Margin="0,0,0,5" />

                    <!-- NEW: Browser Scan moved here -->
                    <Separator Background="#33FFFFFF" Margin="0,10,0,10" />
                    <Button x:Name="BtnBrowserScanSettings" Click="BrowserScan_Click"
                        Background="#333" Foreground="White" BorderBrush="Gray" Height="30"
                        Margin="0,0,0,5">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸŒ" FontSize="14" Margin="0,0,5,0" />
                            <TextBlock Text="Escanear Navegador" FontSize="11" />
                        </StackPanel>
                    </Button>

                    <Button Content="Cerrar MenÃº" Click="CloseSettings_Click" Margin="0,10,0,0"
                        Background="#33FFFFFF" Foreground="White" BorderThickness="0" Padding="5">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="b" Background="#33FFFFFF" CornerRadius="4"
                                    Padding="5">
                                    <ContentPresenter HorizontalAlignment="Center" />
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="b" Property="Background"
                                            Value="#55FFFFFF" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </StackPanel>
            </Border>


            <!-- 2. History List (Background) -->
            <ScrollViewer Grid.Row="1" x:Name="HistoryScrollViewer"
                Style="{StaticResource ScrollViewerStyle}" Margin="20,5,20,5">
                <ItemsControl x:Name="HistoryList">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Margin="0,0,0,15" Opacity="0.5">
                                <!-- Swap: English First (Big), Spanish Second (Small) -->
                                <Grid Margin="0,0,0,4">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" /> <!-- Icon -->
                                        <ColumnDefinition Width="*" />    <!-- Text -->
                                    </Grid.ColumnDefinitions>

                                    <!-- Source Icon -->
                                    <TextBlock Grid.Column="0" Text="{Binding SourceIcon}"
                                        FontFamily="Segoe MDL2 Assets"
                                        Foreground="{Binding SourceColor}"
                                        FontSize="12" Margin="0,3,8,0" VerticalAlignment="Top"
                                        ToolTip="Input Source" />

                                    <!-- Original Text -->
                                    <TextBlock Grid.Column="1" Text="{Binding OriginalText}"
                                        FontWeight="SemiBold" FontSize="14"
                                        Foreground="White"
                                        TextWrapping="Wrap" />
                                </Grid>
                                <TextBlock Text="{Binding TranslatedText}" FontSize="13"
                                    Foreground="#CCCCCC" TextWrapping="Wrap" Margin="20,0,0,0" />
                            </StackPanel>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>

            <!-- Suggestions Overlay (Copilot) -->
            <Border x:Name="SuggestionsOverlay" Grid.Row="1" Background="#F01e293b" CornerRadius="8"
                Margin="15" Visibility="Collapsed" Padding="20" Panel.ZIndex="50">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <TextBlock Foreground="#FFD700" FontWeight="Bold" FontSize="14"
                        Margin="0,0,0,15">
                        <Run FontFamily="Segoe MDL2 Assets" Text="&#xE896;" />
                        <Run Text=" Assistant Suggestions" />
                    </TextBlock>

                    <TextBlock x:Name="SuggestionsText" Grid.Row="1" Text="Thinking..."
                        Foreground="#DDD" FontSize="15" TextWrapping="Wrap" LineHeight="24" />

                    <Button Grid.Row="2" Content="Dismiss" Click="DismissCopilot_Click"
                        HorizontalAlignment="Right" Margin="0,15,0,0" Padding="15,6"
                        Style="{StaticResource CleanIconButtonStyle}" Foreground="White">
                        <!-- Reusing clean style but might need background -->
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="b" Background="#33FFFFFF" CornerRadius="4"
                                    Padding="10,5">
                                    <ContentPresenter HorizontalAlignment="Center" />
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="b" Property="Background"
                                            Value="#55FFFFFF" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </Grid>
            </Border>

            <!-- Session Panel Overlay -->
            <Border x:Name="SessionPanel" Grid.Row="1" Grid.RowSpan="2" Background="#FA1E1E1E"
                CornerRadius="10" Margin="20" Visibility="Collapsed" Panel.ZIndex="200"
                BorderBrush="#44FFFFFF" BorderThickness="1">
                <Grid Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <!-- Header -->
                    <DockPanel Grid.Row="0" LastChildFill="False" Margin="0,0,0,15">
                        <TextBlock Text="Saved Sessions" FontSize="20" FontWeight="Bold"
                            Foreground="White" VerticalAlignment="Center" />
                        <Button Content="&#xE711;" FontFamily="Segoe MDL2 Assets"
                            Click="CloseSessions_Click"
                            DockPanel.Dock="Right" Style="{StaticResource CleanIconButtonStyle}"
                            FontSize="16" />
                    </DockPanel>

                    <!-- Search & New -->
                    <Grid Grid.Row="1" Margin="0,0,0,15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <Border Grid.Column="0" Background="#333" CornerRadius="4" Margin="0,0,10,0">
                            <TextBox x:Name="SearchSessionsBox" Text="Search..."
                                GotFocus="SearchSessionsBox_GotFocus"
                                LostFocus="SearchSessionsBox_LostFocus"
                                KeyUp="SearchSessionsBox_KeyUp"
                                Background="Transparent" Foreground="#AAA" BorderThickness="0"
                                Padding="10,8" VerticalContentAlignment="Center" />
                        </Border>

                        <Button Grid.Column="1" Click="NewSession_Click"
                            Background="#4CAF50" Foreground="White" Padding="15,8"
                            BorderThickness="0">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}"
                                        CornerRadius="4" Padding="{TemplateBinding Padding}">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="+" Margin="0,0,5,0" FontWeight="Bold" />
                                            <TextBlock Text="New Session" />
                                        </StackPanel>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </Grid>

                    <!-- List -->
                    <ListBox x:Name="SessionsList" Grid.Row="2" Background="Transparent"
                        BorderThickness="0"
                        MouseDoubleClick="SessionsList_MouseDoubleClick"
                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                        Margin="0,0,0,15">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border Background="#15FFFFFF" CornerRadius="6" Padding="12"
                                    Margin="0,0,0,8" Cursor="Hand">
                                    <DockPanel>
                                        <TextBlock
                                            Text="{Binding StartTime, StringFormat='MMM dd, HH:mm'}"
                                            Foreground="#888" FontSize="12" DockPanel.Dock="Right"
                                            VerticalAlignment="Top" />
                                        <StackPanel>
                                            <TextBlock Text="{Binding Title}" FontWeight="Bold"
                                                Foreground="White" FontSize="14" Margin="0,0,0,4" />
                                            <TextBlock Text="{Binding Summary}" Foreground="#AAA"
                                                FontSize="12" TextTrimming="CharacterEllipsis"
                                                MaxHeight="36" />
                                            <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                                <TextBlock
                                                    Text="{Binding Entries.Count, StringFormat='Entries: {0}'}"
                                                    Foreground="#666" FontSize="11"
                                                    Margin="0,0,10,0" />
                                                <TextBlock
                                                    Text="{Binding Questions.Count, StringFormat='Questions: {0}'}"
                                                    Foreground="#666" FontSize="11" />
                                            </StackPanel>
                                        </StackPanel>
                                    </DockPanel>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>

                    <!-- Footer (Export) -->
                    <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button Content="Export Markdown" Click="ExportSession_Click"
                            Background="#33FFFFFF" Foreground="White" Padding="15,8"
                            BorderThickness="0">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}"
                                        CornerRadius="4" Padding="{TemplateBinding Padding}">
                                        <TextBlock Text="{TemplateBinding Content}" />
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- 3. Active Translation (Dominant English) -->
            <Border Grid.Row="2" Padding="20,15,20,20" Background="#15FFFFFF"
                CornerRadius="0,0,12,12">
                <StackPanel>
                    <!-- Row 1: Main Text (English/Original) + Assist Button -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <!-- ORIGINAL TEXT (Dominant) -->
                        <TextBlock x:Name="OriginalTextBlock"
                            Grid.Column="0"
                            Text="Listening..."
                            Foreground="#FFFFFF"
                            FontSize="22"
                            FontWeight="SemiBold"
                            FontFamily="Segoe UI"
                            TextWrapping="Wrap"
                            TextAlignment="Left"
                            LineHeight="28">
                            <TextBlock.Effect>
                                <DropShadowEffect ShadowDepth="1" BlurRadius="2" Color="Black"
                                    Opacity="0.5" />
                            </TextBlock.Effect>
                        </TextBlock>

                        <!-- Assist Button next to text -->
                        <Button x:Name="BtnQuickAssist" Grid.Column="1" Click="Copilot_Click"
                            Style="{StaticResource CleanIconButtonStyle}"
                            VerticalAlignment="Bottom" Margin="10,0,0,2">
                            <Button.ToolTip>
                                <ToolTip Content="Asistente de AnÃ¡lisis (Ctrl+Space)" />
                            </Button.ToolTip>
                            <Viewbox Width="20" Height="20">
                                <Canvas Width="24" Height="24">
                                    <!-- Document Frame (White) -->
                                    <Path
                                        Data="M8,3 H20 A1,1 0 0 1 21,4 V20 A1,1 0 0 1 20,21 H8 A1,1 0 0 1 7,20 V17"
                                        Stroke="White" StrokeThickness="2" StrokeLineJoin="Round"
                                        StrokeStartLineCap="Round" StrokeEndLineCap="Round" />
                                    <!-- Lines inside (White) -->
                                    <Path Data="M11,17 H17 M11,13 H15"
                                        Stroke="White" StrokeThickness="2" StrokeLineJoin="Round"
                                        StrokeStartLineCap="Round" StrokeEndLineCap="Round" />
                                    <!-- Magnifying Glass Circle (Gold) -->
                                    <Ellipse Width="6" Height="6" Canvas.Left="5" Canvas.Top="7"
                                        Stroke="#FFD700" StrokeThickness="2" />
                                    <!-- Handler (Gold) -->
                                    <Path Data="M6,12 L3,15"
                                        Stroke="#FFD700" StrokeThickness="2" StrokeLineJoin="Round"
                                        StrokeStartLineCap="Round" StrokeEndLineCap="Round" />
                                </Canvas>
                            </Viewbox>
                        </Button>
                    </Grid>

                    <!-- Row 2: Secondary Text (Spanish/Translation) -->
                    <TextBlock x:Name="TranslatedTextBlock"
                        Text=""
                        Foreground="#99FFFFFF"
                        FontSize="16"
                        FontFamily="Segoe UI"
                        TextWrapping="Wrap"
                        TextAlignment="Left"
                        Margin="0,6,0,0"
                        FontStyle="Italic" />
                </StackPanel>
            </Border>
            <!-- NEW: Primary Action Buttons (Bottom) -->
            <Border Grid.Row="2" Padding="20,10,20,15" Background="Transparent" Panel.ZIndex="10">
                <StackPanel>
                    <!-- Primary Action Button (Large, Contextual) -->
                    <Border x:Name="PrimaryButtonBorder" Background="#4CAF50" CornerRadius="8"
                        Cursor="Hand" MouseLeftButtonDown="PrimaryAction_Click">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Opacity" Value="0.85" />
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center"
                            VerticalAlignment="Center" Margin="15">
                            <TextBlock x:Name="PrimaryButtonIcon" Text="â¸ï¸" FontSize="20"
                                Foreground="White" Margin="0,0,10,0" VerticalAlignment="Center" />
                            <TextBlock x:Name="PrimaryButtonText" Text="PAUSAR ESCUCHA"
                                FontSize="16" FontWeight="Bold" Foreground="White"
                                VerticalAlignment="Center" />
                        </StackPanel>
                    </Border>

                    <!-- Secondary Action Button (Mode Switch) -->
                    <Border x:Name="SecondaryButtonBorder" Background="#555555" CornerRadius="6"
                        Cursor="Hand" Margin="0,10,0,0" MouseLeftButtonDown="SecondaryAction_Click">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Opacity" Value="0.85" />
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center"
                            VerticalAlignment="Center" Margin="12">
                            <TextBlock x:Name="SecondaryButtonIcon" Text="ðŸŽ™ï¸" FontSize="16"
                                Foreground="White" Margin="0,0,8,0" VerticalAlignment="Center" />
                            <TextBlock x:Name="SecondaryButtonText" Text="Cambiar a Modo GrabaciÃ³n"
                                FontSize="14" FontWeight="SemiBold" Foreground="White"
                                VerticalAlignment="Center" />
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>